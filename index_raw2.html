<!DOCTYPE html>
<html lang="it">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>C3D</title>

        <!-- Bootstrap -->
        <link href="assets/css/bootstrap.min.css" rel="stylesheet">

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
        <style>
            body{
                margin: 0;
                overflow: hidden;
            }
            
            #stats {  /* Align stats top-left */
                position: absolute;
                left: 0px;
                top: 0px;
            }
        </style> 
    </head>
    <body>
        <!-- JavaScript libraries -->
        <script src="assets/js/three.min.js"></script> 
        <script src="assets/js/jquery-2.1.1.js"></script>
        <script src="assets/js/Stats.min.js"></script>
        <script src="assets/js/dat.gui.min.js"></script>
        <script src="assets/js/TrackballControls.js"></script>
        
        <!-- custom geoJSON libraries -->
        <script src="libs/archGenerator.js"></script> 
        <script src="libs/furnitureGenerator.js"></script>
        <script src="libs/c3d.js"></script>
        
        <!-- Bootstrap -->
        <script src="assets/js/bootstrap.min.js"></script>
        
        <script>
            C3D.parseJSON();
        </script>
        
        <div class="page-header">
            <h1>C3D</h1>
        </div>

        <ul class="nav nav-tabs dashboard">
            <li class="active">
                <a href="#c3d_panel" data-toggle="tab">
                    C3D panel
                </a>
            </li>
            <li>
                <a href="#2d_model" data-toggle="tab">
                    2D Model
                </a>
            </li>
            <li>
                <a href="#3d_model" data-toggle="tab">
                    3D Model
                </a>
            </li>
            <li>
                <a href="#about" data-toggle="tab">
                    About
                </a>
            </li> 
        </ul>


        <div class="tab-content">
            <div class="tab-pane active" id="c3d_panel">
                <div class="container">
                    <h2>Pannello C3D</h2>
                    
                    <p class="lead">
                    Pannello operazioni
                    </p> 
                </div>
            </div> 

            <div class="tab-pane" id="2d_model">
                <div class="container">
                    <h2>Modello 2D</h2>
                    
                    <p class="lead">
                        File SVG 
                    </p> 
                </div>
            </div> 

            <div class="tab-pane" id="3d_model">
                <div class="cointainer">
    <script>
        var C3D = {};
        // once everything is loaded, we run our Three.js stuff.
        $(function () 
        {
            
            var stats = initStats();
            // create a scene, that will hold all our elements such as objects, cameras and lights.
            var scene = new THREE.Scene();
            // create a camera, which defines where we're looking at.
            var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
            // create a render and set the size
            var renderer = new THREE.WebGLRenderer();
            
            var trackballControls = new THREE.TrackballControls(camera);
            
            renderer.setClearColor(new THREE.Color(0x092D52, 1.0)); 
            //renderer.setClearColor(new THREE.Color(0x2C3848, 1.0));
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMapEnabled = true;
            
            // position and point the camera to the center of the scene
            camera.position.set(-40,-40,40);
            camera.up = new THREE.Vector3(0,0,1);
            camera.lookAt(scene.position);
            
            // add subtle ambient lighting
            var ambiColor = "#1c1c1c";
            var ambientLight = new THREE.AmbientLight(ambiColor);
            scene.add(ambientLight);
            
            // add axis helper
            var axisHelper = new THREE.AxisHelper(3);
            scene.add(axisHelper);
            C3D.scene = scene;
            
            
            /* --------- CODE STARTS HERE --------- */
            
/*
            var parsingObject = {
                scene: C3D.scene,
                architecturePathname: 'json_input/architecture.json',
                furniturePathname: 'json_input/furnitures.json'
            };
*/

            //parsing(parsingObject);
                
            //architectureParsing(scene, architectureParsing_pathname);
            //furnitureParsing(scene, furnitureParsing_pathname);

            
             /* --------- CODE ENDS HERE --------- */
            
            
            
            // add the output of the renderer to the html element
            $('body').append(renderer.domElement);
            
            var controls = new function () {
                this.showAxisHelper = true;
                this.enableTrackball = false;
            };
            
            var enableTrackball = false;
            var gui = new dat.GUI();
            
            gui.add(controls, 'showAxisHelper').onChange(function (value) {
                axisHelper.visible = value;
            });
            
            gui.add(controls, 'enableTrackball').onChange(function (value) {
                enableTrackball = value;
            });
            
            render();
            
            function render() {
                stats.update();
                if (enableTrackball) trackballControls.update();
                
                requestAnimationFrame(render);
                renderer.render(scene, camera);
            }
            
            function initStats() {
                var stats = new Stats();
                stats.setMode(0); // 0: fps, 1: ms
                $('body').append(stats.domElement);
                return stats;
            }
        });
    </script>
                </div>
            </div>

            <div class="tab-pane" id="about">
                <div class="container">
                    <h2>Descrizione tesi</h2>
                    
                    <p class="lead">
                    In una server farm sono collocati in un unico ambiente numerosi server al fine di centralizzarne la gestione, la manutenzione e la sicurezza. <br>

                    La tesi congiunta (2 laureandi) ha l'obiettivo di realizzare un ambiente web di monitoraggio 3D per una server farm.  <br>

                    Il gestore/controllore della server farm ha infatti la necessità di avere in un unico punto una panoramica slilo stato operativo dei sistemi ottenendo in tempo reale e in una modalità grafica di facile fruizione (un modello 3D dell'ambiente, adatta quindi anche a personale non tecnico ma con responsabilità slil'operatività dei sistemi) informazioni di eventuali malfunzionamenti, la possibilità di individuare la relazione tra macchina fisica e applicativi in esecuzione e, laddove la sicurezza fisica rislita importante, avere un tracciamento e localizzazione dei visitatori/operatori. <br>

                    Il lavoro di tesi proposto deve rispondere a queste necessità studiando e realizzando un ambiente web desktop in cui sia possibile visualizzare e navigare un modello 3D interattivo di una server farm, e visualizzare in appositi pannelli le informazioni e le notifiche circa lo stato delle macchine in essa presenti.  <br>

                    Dualmente l'operatore ha la necessità di essere guidato negli interventi all'interno della server farm, la cui regolarità e ripetitività delle strutture rende complesso l'orientamento e la navigazione tra i rack. Il lavoro di tesi proposto deve rispondere a queste necessità studiando e realizzando un ambiente web mobile in cui sia possibile visualizzare e navigare un modello interattivo 2D/2.5D di una server farm, e visualizzare e calcolare percorsi tra punti del modello, tracciando la posizione del visitatore grazie alle recenti tecnologie di localizzazione indoor. <br>
                    </p> 
                </div>
            </div>
        </div>
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="assets/js/bootstrap.min.js"></script>
    </body>
</html>